{% extends "staff/base.html" %}

{% block metatitle %}Edit {{ project.title }}: Staff Area | OpenSAFELY Jobs{% endblock metatitle %}

{% block breadcrumbs %}
<nav class="breadcrumb-container breadcrumb--danger" aria-label="breadcrumb">
  <div class="container">
    <ol class="breadcrumb rounded-0 mb-0 px-0">
      <li class="breadcrumb-item">
        <a href="{% url 'staff:index' %}">Staff area</a>
      </li>
      <li class="breadcrumb-item">
        <a href="{% url 'staff:project-list' %}">Projects</a>
      </li>
      <li class="breadcrumb-item">
        <a href="{{ project.get_staff_url }}">{{ project.title }}</a>
      </li>
      <li class="breadcrumb-item active" aria-current="page">
        Edit
      </li>
    </ol>
  </div>
</nav>
{% endblock breadcrumbs %}

{% block jumbotron %}
<div class="jumbotron jumbotron-fluid jumbotron--danger pt-md-2">
  <div class="container">
    <h1 class="display-4">Edit: {{ project.title }}</h1>
  </div>
</div>
{% endblock jumbotron %}

{% block staff_content %}
<div class="container">
  <div class="row">
    <div class="col col-lg-9 col-xl-8">
      <form class="mb-3" method="POST">
        {% csrf_token %}

        {% include "includes/form_text.html" with field=form.name label="Project name" name="name" %}
        {% include "includes/form_text.html" with field=form.slug label="URL slug" name="slug" %}
        {% include "includes/form_text.html" with field=form.number label="Project number" name="number" extra_attributes=extra_field_attributes %}

        <div class="form-group">
          <label class="font-weight-bold" for="id_org">Org</label>

          <select id="id_org" name="org" class="form-control">
            {% for value, label in form.fields.org.choices %}
            <option
              value="{{ value }}"
              {% if form.org.value|stringformat:"s" == value|stringformat:"s" %}selected{% endif %}
            >
              {{ label }}
            </option>
            {% endfor %}
          </select>

          {% for error in form.org.errors %}
          <p class="text-danger">{{ error }}</p>
          {% endfor %}
        </div>

        <div class="form-group">
          <label class="font-weight-bold" for="id_status">Status</label>

          <select id="id_status" name="status" class="form-control">
            {% for value, label in form.fields.status.choices %}
            <option
              value="{{ value }}"
              {% if form.status.value|stringformat:"s" == value|stringformat:"s" %}selected{% endif %}
            >
              {{ label }}
            </option>
            {% endfor %}
          </select>

          {% for error in form.status.errors %}
          <p class="text-danger">{{ error }}</p>
          {% endfor %}
        </div>

        {% include "includes/form_textarea.html" with field=form.status_description label="Status description" name="status_description" %}

        <button class="btn btn-primary" type="submit">
          Save
        </button>
      </form>
    </div>
  </div>
</div>
{% endblock staff_content %}
